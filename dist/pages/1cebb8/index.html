<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>条件构造器 | Easy-Es</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/img/logo.svg">
    <script async="true" src="https://cdn.wwads.cn/js/makemoney.js" type="text/javascript"></script>
    <script>
    // 万维广告“禁止”广告拦截
    // function called if wwads is blocked
    // https://github.com/bytegravity/whitelist-wwads
    function ABDetected() {
      var adBlockDetected_div = document.createElement("div");
      document.body.appendChild(adBlockDetected_div);
      var navbar = document.querySelector(".navbar");
      navbar.style.cssText="transition:top 300ms;top:33px";
      adBlockDetected_div.style.cssText = "position: fixed; top: 0; left: 0; width: 100%; background: #E01E5A; color: #fff; z-index: 9999999999; font-size: 14px; text-align: center; line-height: 1.5; font-weight: bold; padding-top: 6px; padding-bottom: 6px;";
      adBlockDetected_div.innerHTML = "我们的广告服务商 <a style='color:#fff;text-decoration:underline' target='_blank' href='https://wwads.cn/page/end-user-privacy'>并不跟踪您的隐私</a>，为了支持本站的长期运营，请将我们的网站 <a style='color: #fff;text-decoration:underline' target='_blank' href='https://wwads.cn/page/whitelist-wwads'>加入广告拦截器的白名单</a>。";
      document.getElementsByTagName("body")[0].appendChild(adBlockDetected_div);
      // add a close button to the right side of the div
      var adBlockDetected_close = document.createElement("div");
      adBlockDetected_close.style.cssText = "position: absolute; top: 0; right: 10px; width: 30px; height: 30px; background: #E01E5A; color: #fff; z-index: 9999999999; line-height: 30px; cursor: pointer;";
      adBlockDetected_close.innerHTML = "×";
      adBlockDetected_div.appendChild(adBlockDetected_close);
      // add a click event to the close button
      adBlockDetected_close.onclick = function() {
      this.parentNode.parentNode.removeChild(this.parentNode);
      navbar.style.cssText="transition:top 300ms;top:0";
      };
    }

    function vote() {
      var voteDetected_div = document.createElement("div");
      voteDetected_div.style.cssText = "position: absolute; top: 0; left: 0; width: 100%; background: #7bbfea; color: #fff; z-index: 9999999999; font-size: 14px; text-align: center; line-height: 1.5; font-weight: bold; padding-top: 6px; padding-bottom: 6px;";
      voteDetected_div.innerHTML = "<a style='color:#fff;text-decoration:underline' target='_blank' href='xxxxxx'>Easy-Es 正在参与“2022年度 OSC 中国开源项目”评选，请为我们投上宝贵的一票，谢谢！</a>";
      document.getElementsByTagName("body")[0].appendChild(voteDetected_div);
      voteDetected_div.onclick = function() {
        this.remove();
      };
    }

    function docReady(t) {
      "complete" === document.readyState ||
      "interactive" === document.readyState
        ? setTimeout(t, 1)
        : document.addEventListener("DOMContentLoaded", t);
    }

    //check if wwads' fire function was blocked after document is ready with 3s timeout (waiting the ad loading)
    docReady(function () {
      setTimeout(function () {
        if( window._AdBlockInit === undefined ){
            ABDetected();
        }
      }, 3000);
    });
  </script>
    <meta name="description" content="傻瓜级ElasticSearch搜索引擎ORM框架">
    <meta name="keywords" content="easy-es,Easy-Es官网,傻瓜级Elasticsearch搜索引擎orm框架">
    <meta name="theme-color" content="#11a8cd">
    <meta name="wwads-cn-verify" content="6c4b761a28b734fe93831e3fb400ce87">
    
    <link rel="preload" href="/assets/css/0.styles.6ef972f0.css" as="style"><link rel="preload" href="/assets/js/app.d8825657.js" as="script"><link rel="preload" href="/assets/js/2.b31e9563.js" as="script"><link rel="preload" href="/assets/js/17.c964d5e4.js" as="script"><link rel="prefetch" href="/assets/js/10.ce9e4179.js"><link rel="prefetch" href="/assets/js/11.9fa0dca3.js"><link rel="prefetch" href="/assets/js/12.1ac4758b.js"><link rel="prefetch" href="/assets/js/13.03ec605d.js"><link rel="prefetch" href="/assets/js/14.5b570722.js"><link rel="prefetch" href="/assets/js/15.6251bc25.js"><link rel="prefetch" href="/assets/js/16.7efc9d20.js"><link rel="prefetch" href="/assets/js/18.f139317c.js"><link rel="prefetch" href="/assets/js/19.ed077ac6.js"><link rel="prefetch" href="/assets/js/20.ecd9d678.js"><link rel="prefetch" href="/assets/js/21.20d107ac.js"><link rel="prefetch" href="/assets/js/22.92c5d56d.js"><link rel="prefetch" href="/assets/js/23.61a37b77.js"><link rel="prefetch" href="/assets/js/24.588c7fbe.js"><link rel="prefetch" href="/assets/js/25.3abb42f0.js"><link rel="prefetch" href="/assets/js/26.d92123f2.js"><link rel="prefetch" href="/assets/js/27.26ed9a0f.js"><link rel="prefetch" href="/assets/js/28.23d8772c.js"><link rel="prefetch" href="/assets/js/29.3b8ba466.js"><link rel="prefetch" href="/assets/js/3.9bed2644.js"><link rel="prefetch" href="/assets/js/30.74ae62f4.js"><link rel="prefetch" href="/assets/js/31.1344813f.js"><link rel="prefetch" href="/assets/js/32.e24baad6.js"><link rel="prefetch" href="/assets/js/33.765d0f20.js"><link rel="prefetch" href="/assets/js/34.784ca7c5.js"><link rel="prefetch" href="/assets/js/35.8298ef13.js"><link rel="prefetch" href="/assets/js/36.252cae81.js"><link rel="prefetch" href="/assets/js/37.8cae2719.js"><link rel="prefetch" href="/assets/js/38.345c3a98.js"><link rel="prefetch" href="/assets/js/39.a1f04375.js"><link rel="prefetch" href="/assets/js/4.ff5881ba.js"><link rel="prefetch" href="/assets/js/40.e305adb7.js"><link rel="prefetch" href="/assets/js/41.716c1128.js"><link rel="prefetch" href="/assets/js/42.b8ad4e7d.js"><link rel="prefetch" href="/assets/js/43.bf45e0b1.js"><link rel="prefetch" href="/assets/js/44.0ef92d59.js"><link rel="prefetch" href="/assets/js/45.e0c33e0a.js"><link rel="prefetch" href="/assets/js/5.494b09be.js"><link rel="prefetch" href="/assets/js/6.f1b3c3cc.js"><link rel="prefetch" href="/assets/js/7.1334f16e.js"><link rel="prefetch" href="/assets/js/8.fcc202d8.js"><link rel="prefetch" href="/assets/js/9.1211f836.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6ef972f0.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="Easy-Es" class="logo"> <span class="site-name can-hide">Easy-Es</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/pages/ec7460/" class="nav-link">文档</a></div><div class="nav-item"><a href="/pages/fb599d/" class="nav-link">💖支持</a></div><div class="nav-item"><a href="/pages/1a819d/" class="nav-link">🌻生态</a></div><div class="nav-item"><a href="/pages/55wa9d/" class="nav-link">🚀关于项目</a></div><div class="nav-item"><a href="/pages/kd129d/" class="nav-link">加入社区讨论</a></div><div class="nav-item"><a href="/pages/7d828w/" class="nav-link">参与贡献</a></div><div class="nav-item"><a href="/pages/6f829d/" class="nav-link">谁在使用</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="💞推荐" class="dropdown-title"><!----> <span class="title" style="display:;">💞推荐</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://gitee.com/easy-es/fit-plan" target="_blank" rel="noopener noreferrer" class="nav-link external">
  健身计划一键生成系统
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://doc.xugaoyi.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vuepress-theme-vdoing
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://gitee.com/dromara/easy-es" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/dromara/easy-es" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="💫语言选择" class="dropdown-title"><!----> <span class="title" style="display:;">💫语言选择</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://easy-es.cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  简体中文
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://en.easy-es.cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  English
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/pages/ec7460/" class="nav-link">文档</a></div><div class="nav-item"><a href="/pages/fb599d/" class="nav-link">💖支持</a></div><div class="nav-item"><a href="/pages/1a819d/" class="nav-link">🌻生态</a></div><div class="nav-item"><a href="/pages/55wa9d/" class="nav-link">🚀关于项目</a></div><div class="nav-item"><a href="/pages/kd129d/" class="nav-link">加入社区讨论</a></div><div class="nav-item"><a href="/pages/7d828w/" class="nav-link">参与贡献</a></div><div class="nav-item"><a href="/pages/6f829d/" class="nav-link">谁在使用</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="💞推荐" class="dropdown-title"><!----> <span class="title" style="display:;">💞推荐</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://gitee.com/easy-es/fit-plan" target="_blank" rel="noopener noreferrer" class="nav-link external">
  健身计划一键生成系统
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://doc.xugaoyi.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vuepress-theme-vdoing
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://gitee.com/dromara/easy-es" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/dromara/easy-es" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="💫语言选择" class="dropdown-title"><!----> <span class="title" style="display:;">💫语言选择</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://easy-es.cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  简体中文
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://en.easy-es.cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  English
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>快速入门</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/ec7460/" class="sidebar-link">简介</a></li><li><a href="/pages/258e80/" class="sidebar-link">适用场景</a></li><li><a href="/pages/6e2197/" class="sidebar-link">顾虑粉碎</a></li><li><a href="/pages/0867bd/" class="sidebar-link">避坑指南</a></li><li><a href="/pages/949ac4/" class="sidebar-link">快速开始</a></li><li><a href="/pages/12283a/" class="sidebar-link">springboot集成demo</a></li><li><a href="/pages/9a3e4c/" class="sidebar-link">配置</a></li><li><a href="/pages/4eb7db/" class="sidebar-link">注解</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>核心功能</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/06b5d9/" class="sidebar-link">索引处理</a></li><li><a href="/pages/c5999a/" class="sidebar-link">CRUD接口</a></li><li><a href="/pages/1cebb8/" aria-current="page" class="active sidebar-link">条件构造器</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>拓展功能</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/a19563/" class="sidebar-link">混合查询</a></li><li><a href="/pages/4446a5/" class="sidebar-link">原生查询</a></li><li><a href="/pages/0cf11e/" class="sidebar-link">分页查询</a></li><li><a href="/pages/05702c/" class="sidebar-link">嵌套类型</a></li><li><a href="/pages/0bbd7e/" class="sidebar-link">父子类型</a></li><li><a href="/pages/981130/" class="sidebar-link">获取DSL语句</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>高阶语法</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/c9c57f/" class="sidebar-link">查询字段过滤</a></li><li><a href="/pages/274da8/" class="sidebar-link">排序</a></li><li><a href="/pages/b508b3/" class="sidebar-link">聚合查询</a></li><li><a href="/pages/2688d1/" class="sidebar-link">分词查询</a></li><li><a href="/pages/e6fc8d/" class="sidebar-link">权重</a></li><li><a href="/pages/899c12/" class="sidebar-link">高亮查询</a></li><li><a href="/pages/39b41e/" class="sidebar-link">GEO地理位置查询</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>插件</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/6431d1/" class="sidebar-link">插件</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>其它</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/453119/" class="sidebar-link">问答</a></li><li><a href="/pages/98d3d3/" class="sidebar-link">与MP差异</a></li><li><a href="/pages/6fea40/" class="sidebar-link">MySQL和EE语法对比</a></li><li><a href="/pages/b65406/" class="sidebar-link">更新日志</a></li><li><a href="/pages/e14b42/" class="sidebar-link">更新计划</a></li><li><a href="/pages/796d01/" class="sidebar-link">版权</a></li><li><a href="/pages/4d7703/" class="sidebar-link">鸣谢</a></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><span data-v-06225672>0.0</span></li><li data-v-06225672><span data-v-06225672>核心功能</span></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://gitee.com/easy-es/" target="_blank" title="作者" class="beLink" data-v-06225672>老汉</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2022-06-21</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">条件构造器<!----></h1> <div class="page-slot page-slot-top">
  <div class="wwads-cn wwads-horizontal page-wwads" data-id="174"></div>
  <style>
      .page-wwads{
        width:100%!important;
        min-height: 0;
        margin: 0;
      }
      .page-wwads .wwads-img img{
        width:80px!important;
      }
      .page-wwads .wwads-poweredby{
        width: 40px;
        position: absolute;
        right: 25px;
        bottom: 3px;
      }
      .wwads-content .wwads-text, .page-wwads .wwads-text{
        height: 100%;
        padding-top: 5px;
        display: block;
      }
  </style>
  </div> <div class="theme-vdoing-content content__default"><div class="custom-block tip"><p class="custom-block-title">温馨提示</p> <p>如果您之前已经有了解过MP的条件构造器,那我们建议您直接拉到文末,看一下index,enableMust2Filter,and&amp;or这三项MP中没有的即可,其它与MP一致.
Wrapper支持两种方式创建:</p> <ul><li>直接new,例如 new <code>LambdaEsQueryWrapper&lt;&gt;()</code>.</li> <li>通过EsWrappers.lambdaQuery()创建,可支撑链式编程的场景,对标MP的Wrappers</li></ul></div> <div class="custom-block tip"><p class="custom-block-title">说明</p> <ul><li>以下出现的第一个入参boolean condition表示该条件是否加入最后生成的语句中，例如：query.like(StringUtils.isNotBlank(name), Entity::getName, name) .eq(age!=null &amp;&amp; age &gt;= 0, Entity::getAge, age)</li> <li>以下代码块内的多个方法均为从上往下补全个别boolean类型的入参,默认为true</li> <li>以下出现的泛型Param均为Wrapper的子类实例(均具有AbstractWrapper的所有方法)</li> <li>以下方法在入参中出现的R为泛型,在普通wrapper中是String,在LambdaWrapper中是函数(例:Entity::getId,Entity为实体类,getId为字段id的getMethod)</li> <li>以下方法入参中的R column均表示数据库字段,当R具体类型为String时则为数据库字段名(字段名是数据库关键字的自己用转义符包裹!)!而不是实体类数据字段名!!!,另当R具体类型为SFunction时项目runtime不支持eclipse自家的编译器!!!</li> <li>以下举例均为使用普通wrapper,入参为Map和List的均以json形式表现!</li> <li>使用中如果入参的Map或者List为空,则不会加入最后生成的sql中!</li> <li>有任何疑问就点开源码看,看不懂函数的<a href="https://www.jianshu.com/p/613a6118e2e0" target="_blank" rel="noopener noreferrer">点击我学习新知识<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <div class="custom-block tip"><p class="custom-block-title">警告</p> <p>不支持以及不赞成在 RPC 调用中把 Wrapper 进行传输</p> <ol><li>wrapper 很重</li> <li>传输 wrapper 可以类比为你的 controller 用 map 接收值(开发一时爽,维护火葬场)</li> <li>正确的 RPC 调用姿势是写一个 DTO 进行传输,被调用方再根据 DTO 执行相应的操作</li> <li>我们拒绝接受任何关于 RPC 传输 Wrapper 报错相关的 issue 甚至 pr</li></ol></div> <h3 id="abstractwrapper"><a href="#abstractwrapper" class="header-anchor">#</a> AbstractWrapper</h3> <div class="custom-block tip"><p class="custom-block-title">说明</p> <p>QueryWrapper(LambdaEsQueryWrapper) 和 UpdateWrapper(LambdaEsUpdateWrapper) 的父类用于生成 语句 的 where 条件, entity 属性也用于生成 语句 的 where 条件注意: entity 生成的 where 条件与 使用各个 api 生成的 where 条件 <strong>没有任何关联行为</strong></p></div> <h3 id="querywrapper"><a href="#querywrapper" class="header-anchor">#</a> QueryWrapper</h3> <div class="custom-block tip"><p class="custom-block-title">说明</p> <p>继承自 AbstractWrapper ,自身的内部属性 entity 也用于生成 where 条件及 LambdaEsQueryWrapper</p></div> <h3 id="updatewrapper"><a href="#updatewrapper" class="header-anchor">#</a> UpdateWrapper</h3> <div class="custom-block tip"><p class="custom-block-title">说明</p> <p>继承自 AbstractWrapper ,自身的内部属性 entity 也用于生成 where 条件及 LambdaEsUpdateWrapper</p></div> <h3 id="alleq"><a href="#alleq" class="header-anchor">#</a> allEq</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token function">allEq</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">R</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> params<span class="token punctuation">)</span>
<span class="token function">allEq</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">R</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> params<span class="token punctuation">,</span> <span class="token keyword">boolean</span> null2IsNull<span class="token punctuation">)</span>
<span class="token function">allEq</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> condition<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">R</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> params<span class="token punctuation">,</span> <span class="token keyword">boolean</span> null2IsNull<span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>全部<a href="/v1.0.0/020.核心功能/eq.html">eq</a>(或个别<a href="/v1.0.0/020.核心功能/isNull.html">isNull</a>)</p> <div class="custom-block tip"><p class="custom-block-title">个别参数说明</p> <p>params : key为数据库字段名,value为字段值
null2IsNull : 为true则在map的value为null时调用<a href="/v1.0.0/020.核心功能/isNull.html"> isNull</a>方法,为false时则忽略value为null的</p></div> <ul><li>例1: allEq({id:1,name:&quot;老王&quot;,age:null})---&gt;id = 1 and name = '老王' and age is null</li> <li>例2: allEq({id:1,name:&quot;老王&quot;,age:null}, false)---&gt;id = 1 and name = '老王'</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token function">allEq</span><span class="token punctuation">(</span><span class="token class-name">BiPredicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">R</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> filter<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">R</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> params<span class="token punctuation">)</span>
<span class="token function">allEq</span><span class="token punctuation">(</span><span class="token class-name">BiPredicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">R</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> filter<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">R</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> params<span class="token punctuation">,</span> <span class="token keyword">boolean</span> null2IsNull<span class="token punctuation">)</span>
<span class="token function">allEq</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> condition<span class="token punctuation">,</span> <span class="token class-name">BiPredicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">R</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> filter<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">R</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> params<span class="token punctuation">,</span> <span class="token keyword">boolean</span> null2IsNull<span class="token punctuation">)</span> 

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">个别参数说明</p> <blockquote><p>filter : 过滤函数,是否允许字段传入比对条件中
params 与 null2IsNull : 同上</p></blockquote></div> <ul><li>例1: allEq((k,v) -&gt; k.indexOf(&quot;a&quot;) &gt;= 0, {id:1,name:&quot;老王&quot;,age:null})---&gt;name = '老王' and age is null</li> <li>例2: allEq((k,v) -&gt; k.indexOf(&quot;a&quot;) &gt;= 0, {id:1,name:&quot;老王&quot;,age:null}, false)---&gt;name = '老王'</li></ul> <h3 id="eq"><a href="#eq" class="header-anchor">#</a> eq</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token function">eq</span><span class="token punctuation">(</span><span class="token class-name">R</span> column<span class="token punctuation">,</span> <span class="token class-name">Object</span> val<span class="token punctuation">)</span>
<span class="token function">eq</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> condition<span class="token punctuation">,</span> <span class="token class-name">R</span> column<span class="token punctuation">,</span> <span class="token class-name">Object</span> val<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>等于 =</li> <li>例: eq(&quot;name&quot;, &quot;老王&quot;)---&gt;name = '老王'</li></ul> <h3 id="ne"><a href="#ne" class="header-anchor">#</a> ne</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token function">ne</span><span class="token punctuation">(</span><span class="token class-name">R</span> column<span class="token punctuation">,</span> <span class="token class-name">Object</span> val<span class="token punctuation">)</span>
<span class="token function">ne</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> condition<span class="token punctuation">,</span> <span class="token class-name">R</span> column<span class="token punctuation">,</span> <span class="token class-name">Object</span> val<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>不等于 !=</li> <li>例: ne(&quot;name&quot;, &quot;老王&quot;)---&gt;name != '老王'</li></ul> <h3 id="gt"><a href="#gt" class="header-anchor">#</a> gt</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token function">gt</span><span class="token punctuation">(</span><span class="token class-name">R</span> column<span class="token punctuation">,</span> <span class="token class-name">Object</span> val<span class="token punctuation">)</span>
<span class="token function">gt</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> condition<span class="token punctuation">,</span> <span class="token class-name">R</span> column<span class="token punctuation">,</span> <span class="token class-name">Object</span> val<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>大于 &gt;</li> <li>例: gt(&quot;age&quot;, 18)---&gt;age &gt; 18</li></ul> <h3 id="ge"><a href="#ge" class="header-anchor">#</a> ge</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token function">ge</span><span class="token punctuation">(</span><span class="token class-name">R</span> column<span class="token punctuation">,</span> <span class="token class-name">Object</span> val<span class="token punctuation">)</span>
<span class="token function">ge</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> condition<span class="token punctuation">,</span> <span class="token class-name">R</span> column<span class="token punctuation">,</span> <span class="token class-name">Object</span> val<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>大于等于 &gt;=</li> <li>例: ge(&quot;age&quot;, 18)---&gt;age &gt;= 18</li></ul> <h3 id="lt"><a href="#lt" class="header-anchor">#</a> lt</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token function">lt</span><span class="token punctuation">(</span><span class="token class-name">R</span> column<span class="token punctuation">,</span> <span class="token class-name">Object</span> val<span class="token punctuation">)</span>
<span class="token function">lt</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> condition<span class="token punctuation">,</span> <span class="token class-name">R</span> column<span class="token punctuation">,</span> <span class="token class-name">Object</span> val<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>小于 &lt;</li> <li>例: lt(&quot;age&quot;, 18)---&gt;age &lt; 18</li></ul> <h3 id="le"><a href="#le" class="header-anchor">#</a> le</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token function">le</span><span class="token punctuation">(</span><span class="token class-name">R</span> column<span class="token punctuation">,</span> <span class="token class-name">Object</span> val<span class="token punctuation">)</span>
<span class="token function">le</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> condition<span class="token punctuation">,</span> <span class="token class-name">R</span> column<span class="token punctuation">,</span> <span class="token class-name">Object</span> val<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>小于等于 &lt;=</li> <li>例: le(&quot;age&quot;, 18)---&gt;age &lt;= 18</li></ul> <h3 id="between"><a href="#between" class="header-anchor">#</a> between</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token function">between</span><span class="token punctuation">(</span><span class="token class-name">R</span> column<span class="token punctuation">,</span> <span class="token class-name">Object</span> val1<span class="token punctuation">,</span> <span class="token class-name">Object</span> val2<span class="token punctuation">)</span>
<span class="token function">between</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> condition<span class="token punctuation">,</span> <span class="token class-name">R</span> column<span class="token punctuation">,</span> <span class="token class-name">Object</span> val1<span class="token punctuation">,</span> <span class="token class-name">Object</span> val2<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>BETWEEN 值1 AND 值2</li> <li>例: between(&quot;age&quot;, 18, 30)---&gt;age between 18 and 30</li></ul> <h3 id="notbetween"><a href="#notbetween" class="header-anchor">#</a> notBetween</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token function">notBetween</span><span class="token punctuation">(</span><span class="token class-name">R</span> column<span class="token punctuation">,</span> <span class="token class-name">Object</span> val1<span class="token punctuation">,</span> <span class="token class-name">Object</span> val2<span class="token punctuation">)</span>
<span class="token function">notBetween</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> condition<span class="token punctuation">,</span> <span class="token class-name">R</span> column<span class="token punctuation">,</span> <span class="token class-name">Object</span> val1<span class="token punctuation">,</span> <span class="token class-name">Object</span> val2<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>NOT BETWEEN 值1 AND 值2</li> <li>例: notBetween(&quot;age&quot;, 18, 30)---&gt;age not between 18 and 30</li></ul> <h3 id="like"><a href="#like" class="header-anchor">#</a> like</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token function">like</span><span class="token punctuation">(</span><span class="token class-name">R</span> column<span class="token punctuation">,</span> <span class="token class-name">Object</span> val<span class="token punctuation">)</span>
<span class="token function">like</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> condition<span class="token punctuation">,</span> <span class="token class-name">R</span> column<span class="token punctuation">,</span> <span class="token class-name">Object</span> val<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>LIKE '%值%'</li> <li>例: like(&quot;name&quot;, &quot;王&quot;)---&gt;name like '%王%'</li></ul> <h3 id="notlike"><a href="#notlike" class="header-anchor">#</a> notLike</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token function">notLike</span><span class="token punctuation">(</span><span class="token class-name">R</span> column<span class="token punctuation">,</span> <span class="token class-name">Object</span> val<span class="token punctuation">)</span>
<span class="token function">notLike</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> condition<span class="token punctuation">,</span> <span class="token class-name">R</span> column<span class="token punctuation">,</span> <span class="token class-name">Object</span> val<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>NOT LIKE '%值%'</li> <li>例: notLike(&quot;name&quot;, &quot;王&quot;)---&gt;name not like '%王%'</li></ul> <h3 id="likeleft"><a href="#likeleft" class="header-anchor">#</a> likeLeft</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token function">likeLeft</span><span class="token punctuation">(</span><span class="token class-name">R</span> column<span class="token punctuation">,</span> <span class="token class-name">Object</span> val<span class="token punctuation">)</span>
<span class="token function">likeLeft</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> condition<span class="token punctuation">,</span> <span class="token class-name">R</span> column<span class="token punctuation">,</span> <span class="token class-name">Object</span> val<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>LIKE '%值'</li> <li>例: likeLeft(&quot;name&quot;, &quot;王&quot;)---&gt;name like '%王'</li></ul> <h3 id="likeright"><a href="#likeright" class="header-anchor">#</a> likeRight</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token function">likeRight</span><span class="token punctuation">(</span><span class="token class-name">R</span> column<span class="token punctuation">,</span> <span class="token class-name">Object</span> val<span class="token punctuation">)</span>
<span class="token function">likeRight</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> condition<span class="token punctuation">,</span> <span class="token class-name">R</span> column<span class="token punctuation">,</span> <span class="token class-name">Object</span> val<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>LIKE '值%'</li> <li>例: likeRight(&quot;name&quot;, &quot;王&quot;)---&gt;name like '王%'</li></ul> <h3 id="isnull"><a href="#isnull" class="header-anchor">#</a> isNull</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token function">isNull</span><span class="token punctuation">(</span><span class="token class-name">R</span> column<span class="token punctuation">)</span>
<span class="token function">isNull</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> condition<span class="token punctuation">,</span> <span class="token class-name">R</span> column<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>字段 IS NULL</li> <li>例: isNull(Document::getTitle)---&gt;title is null</li></ul> <h3 id="isnotnull"><a href="#isnotnull" class="header-anchor">#</a> isNotNull</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token function">isNotNull</span><span class="token punctuation">(</span><span class="token class-name">R</span> column<span class="token punctuation">)</span>
<span class="token function">isNotNull</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> condition<span class="token punctuation">,</span> <span class="token class-name">R</span> column<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>字段 IS NOT NULL</li> <li>例: isNotNull(Document::getTitle)---&gt;title is not null</li></ul> <h3 id="in"><a href="#in" class="header-anchor">#</a> in</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token function">in</span><span class="token punctuation">(</span><span class="token class-name">R</span> column<span class="token punctuation">,</span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> value<span class="token punctuation">)</span>
<span class="token function">in</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> condition<span class="token punctuation">,</span> <span class="token class-name">R</span> column<span class="token punctuation">,</span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> value<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>字段 in (value.get(0), value.get(1), ...)</li> <li>例: in(&quot;age&quot;,{1,2,3})---&gt;age in (1,2,3)</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token function">in</span><span class="token punctuation">(</span><span class="token class-name">R</span> column<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> values<span class="token punctuation">)</span>
<span class="token function">in</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> condition<span class="token punctuation">,</span> <span class="token class-name">R</span> column<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> values<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>字段 in (v0, v1, ...)</li> <li>例: in(&quot;age&quot;, 1, 2, 3)---&gt;age in (1,2,3)</li></ul> <h3 id="notin"><a href="#notin" class="header-anchor">#</a> notIn</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token function">notIn</span><span class="token punctuation">(</span><span class="token class-name">R</span> column<span class="token punctuation">,</span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> value<span class="token punctuation">)</span>
<span class="token function">notIn</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> condition<span class="token punctuation">,</span> <span class="token class-name">R</span> column<span class="token punctuation">,</span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> value<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>字段 not in (value.get(0), value.get(1), ...)</li> <li>例: notIn(&quot;age&quot;,{1,2,3})---&gt;age not in (1,2,3)</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token function">notIn</span><span class="token punctuation">(</span><span class="token class-name">R</span> column<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> values<span class="token punctuation">)</span>
<span class="token function">notIn</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> condition<span class="token punctuation">,</span> <span class="token class-name">R</span> column<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> values<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>字段 not in (v0, v1, ...)</li> <li>例: notIn(&quot;age&quot;, 1, 2, 3)---&gt;age not in (1,2,3)</li></ul> <h3 id="groupby"><a href="#groupby" class="header-anchor">#</a> groupBy</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token function">groupBy</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> columns<span class="token punctuation">)</span>
<span class="token function">groupBy</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> condition<span class="token punctuation">,</span> <span class="token class-name">R</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> columns<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>分组：GROUP BY 字段, ...</li> <li>例: groupBy(Document::getId,Document::getTitle)---&gt;group by id,title</li></ul> <h3 id="orderbydesc"><a href="#orderbydesc" class="header-anchor">#</a> orderByDesc</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token function">orderByDesc</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> columns<span class="token punctuation">)</span>
<span class="token function">orderByDesc</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> condition<span class="token punctuation">,</span> <span class="token class-name">R</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> columns<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>排序：ORDER BY 字段, ... DESC</li> <li>例: orderByDesc(Document::getId,Document::getTitle)---&gt;order by id DESC,title DESC</li></ul> <h3 id="limit"><a href="#limit" class="header-anchor">#</a> limit</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token function">limit</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">limit</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> m<span class="token punctuation">,</span> <span class="token class-name">Integer</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>limit n 最多返回多少条数据,相当于MySQL中limit n 中的n,用法一致.</li> <li>limit m,n 跳过m条数据,最多返回n条数据,相当于MySQL中的limit m,n 或 offset m  limit n</li> <li>例: limit(10)---&gt;最多只返回10条数据</li> <li>例: limit(2,5)---&gt;跳过前2条数据,从第3条开始查询,总共查询5条数据</li></ul> <div class="custom-block tip"><p class="custom-block-title">温馨提示</p> <p>n参数若不指定,则其默认值是10000 如果你单次查询,不想要太多得分较低的数据,需要手动指定n去做限制.
另外此参数作用与Es中的size,from一致,只是为了兼容MySQL语法而引入,使用者可以根据自身习惯二选一,当两种都用时,只有一种会生效,后指定的会覆盖先指定的.</p></div> <h3 id="from"><a href="#from" class="header-anchor">#</a> from</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token function">from</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> from<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>从第几条数据开始查询,相当于MySQL中limit (m,n)中的m.</li> <li>例: from(10)---&gt;从第10条数据开始查询</li></ul> <h3 id="size"><a href="#size" class="header-anchor">#</a> size</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token function">size</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> size<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>最多返回多少条数据,相当于MySQL中limit (m,n)中的n 或limit n 中的n</li> <li>例: size(10)---&gt;最多只返回10条数据</li></ul> <div class="custom-block tip"><p class="custom-block-title">温馨提示</p> <p>如果你单次查询,不想要太多得分较低的数据,需要手动指定size去做限制.</p></div> <h3 id="set"><a href="#set" class="header-anchor">#</a> set</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token function">set</span><span class="token punctuation">(</span><span class="token class-name">String</span> column<span class="token punctuation">,</span> <span class="token class-name">Object</span> val<span class="token punctuation">)</span>
<span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> condition<span class="token punctuation">,</span> <span class="token class-name">String</span> column<span class="token punctuation">,</span> <span class="token class-name">Object</span> val<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>SQL SET 字段</li> <li>例: set(&quot;name&quot;, &quot;老李头&quot;)</li> <li>例: set(&quot;name&quot;, &quot;&quot;)---&gt;数据库字段值变为<strong>空字符串</strong></li> <li>例: set(&quot;name&quot;, null)---&gt;数据库字段值变为null</li></ul> <h3 id="index"><a href="#index" class="header-anchor">#</a> index</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token function">index</span><span class="token punctuation">(</span><span class="token class-name">String</span> indexName<span class="token punctuation">)</span>
<span class="token function">eq</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> condition<span class="token punctuation">,</span> <span class="token class-name">String</span> indexName<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">温馨提示</p> <p>可通过wrapper.index(String indexName)指定本次查询作用于哪个索引,如果本次查询要从多个索引上查询,那么索引名称可以用逗号隔开,例如wrapper.eq(&quot;index1&quot;,&quot;indexes&quot;).
wrapper中指定的索引名称优先级最高,如果不指定则取实体类中配置的索引名称,如果实体类也未配置,则取实体名称小写作为当前查询的索引名
针对insert/delete/update等接口中无wrapper的情况,如果你需要指定索引名,可直接在对应接口的入参中添加索引名称,可参考下面示例:</p></div> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    <span class="token class-name">Document</span> document <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Document</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 省略为document赋值的代码</span>
    <span class="token class-name">String</span> indexName <span class="token operator">=</span> <span class="token string">&quot;laohan&quot;</span><span class="token punctuation">;</span>
    <span class="token function">insert</span><span class="token punctuation">(</span>document<span class="token punctuation">,</span>indexName<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="enablemust2filter"><a href="#enablemust2filter" class="header-anchor">#</a> enableMust2Filter</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token function">enableMust2Filter</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> enable<span class="token punctuation">)</span>
<span class="token function">enableMust2Filter</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> condition<span class="token punctuation">,</span> <span class="token keyword">boolean</span> enable<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">温馨提示</p> <p>是否将must查询条件转换成filter查询条件,可以在wrapper中直接指定本次查询的条件是否转换,如果不指定,则从全局配置文件中获取,若配置文件中也未配置,则默认不转换.
must查询条件计算得分,filter不计算得分,因此在不需要计算得分的查询场景中,开启此配置可提升少许查询性能.</p></div> <h3 id="and-or-重点"><a href="#and-or-重点" class="header-anchor">#</a> and&amp;or (重点)</h3> <div class="custom-block tip"><p class="custom-block-title">致歉</p> <p>ES的参数实际上是以树形数据结构封装的,所以在ES中的AND及OR没有办法做到和MySQL中一致,为了实现和MP几乎一致的语法,作者那糟老头子头发都想没了...
好在最后,基本上做到了99%相似度的语法,仍有1%需要各位用户学习一下.</p></div> <p>MySQL和ES语法对应关系表格如下</p> <table><thead><tr><th>MySQL</th> <th>ES</th></tr></thead> <tbody><tr><td>and(条件1,条件2...)</td> <td>must BoolQueryBuilder(条件1,条件2)</td></tr> <tr><td>or(条件1,条件2...)</td> <td>should BoolQueryBuilder(条件1,条件2)</td></tr> <tr><td>条件1.or().条件2</td> <td>should条件1,should条件2</td></tr></tbody></table> <blockquote><p>AND 介绍,EE中的AND其实就是将AND括号中的多个查询条件封装进一个BoolQueryBuilder中作为整体,然后该整体与其他参数默认以Must封装,功能类似MySQL中的 AND(条件1,条件2,条件3...)</p></blockquote> <p>AND API</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token function">and</span><span class="token punctuation">(</span><span class="token class-name">Consumer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Param</span><span class="token punctuation">&gt;</span></span> consumer<span class="token punctuation">)</span>
<span class="token function">and</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> condition<span class="token punctuation">,</span> <span class="token class-name">Consumer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Param</span><span class="token punctuation">&gt;</span></span> consumer<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>AND</li> <li>例: and(i -&gt; i.eq(Document::getTitle, &quot;Hello&quot;).ne(Document::getCreator, &quot;Guy&quot;))---&gt;and (title ='Hello' and creator != 'Guy' )</li></ul> <blockquote><p>OR 介绍,EE中的OR和MP中的OR一样,支持2种,一种是or(),作为连接符,另一种是or(条件1,条件2,条件3).</p></blockquote> <ul><li>第一种or():用于把or()连接符前面和后面的must条件统统重置为should查询条件</li> <li>第二种or(条件1,条件2,条件3...): 用于将括号中的多个查询条件封装进一个BoolQueryBuilder中作为整体,然后该整体与其它参数默认以Should封装,功能类似MySQL中的OR(条件1,条件2,条件3...)</li> <li>第三种特殊情况,就是第一种or()连接符出现在and(条件1.or().条件2...)或or(条件1.or().条件2...)中,此时or()将must条件重置为should条件的范围仅限于括号内,括号外面的查询条件不受影响.</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token function">or</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">or</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> condition<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>拼接 OR <strong>注意事项:</strong> 主动调用or表示紧接着下一个<strong>方法</strong>不是用and连接!(不调用or则默认为使用and连接)</li> <li>例: eq(&quot;Document::getId&quot;,1).or().eq(Document::getTitle,&quot;Hello&quot;)---&gt;id = 1 or title ='Hello'</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token function">or</span><span class="token punctuation">(</span><span class="token class-name">Consumer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Param</span><span class="token punctuation">&gt;</span></span> consumer<span class="token punctuation">)</span>
<span class="token function">or</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> condition<span class="token punctuation">,</span> <span class="token class-name">Consumer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Param</span><span class="token punctuation">&gt;</span></span> consumer<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li><p>OR</p></li> <li><p>例: or(i -&gt; i.eq(Document::getTitle, &quot;Hello&quot;).ne(Document::getCreator, &quot;Guy&quot;))---&gt;or (title ='Hello' and status != 'Guy' )</p></li> <li><p>特殊情况</p></li> <li><p>例: eq(Document::getTitle,&quot;Hello&quot;)
.and(i-&gt;i.eq(Document::getCreator,&quot;Bob&quot;).or().eq(Document::getCreator,&quot;Tom&quot;))---&gt; title=&quot;Hello&quot; and(creator=&quot;Bob&quot; or creator=&quot;Tom&quot;)</p></li></ul> <hr> <p>除此之外,有一部分使用场景是如下图这样的,所有查询字段,查询类型,匹配规则等都是不固定的,由用户自由来选,这种情况下,采用上面的语法代码会非常难写,不妨使用queryStringQuery API来解决,用它来解决,整个语法就更像MySQL了,而且灵活性和效率都很高.</p> <p><img src="https://iknow.hs.net/7bcf189a-053a-48fa-85d6-ef8b763d427a.png" alt="image1"></p> <div class="custom-block tip"><p class="custom-block-title">前置知识学习</p> <p>正式进入主题前,我们先来了解下ES的索引,因为有很多小白不懂ES索引,所以这里简单说一下ES的keyword类型和text类型,以免下面踩坑,已经了解的可直接跳过此段介绍.</p> <p>ES中的keyword类型,和MySQL中的字段基本上差不多,当我们需要对查询字段进行精确匹配,左模糊,右模糊,全模糊,排序聚合等操作时,需要该字段的索引类型为keyword类型,当我们需要对字段进行分词查询时,需要该字段的类型为text类型,并且指定分词器(不指定就用ES默认分词器,效果通常不理想).当同一个字段,我们既需要把它当keyword类型使用,又需要把它当text类型使用时,此时我们的索引类型为keyword_text类型,EE中可以对字段添加注解@TableField(fieldType = FieldType.KEYWORD_TEXT),如此该字段就会被创建为keyword+text双类型如下图所示,值得注意的是,当我们把该字段当做keyword类型查询时,ES要求传入的字段名称为&quot;字段名.keyword&quot;,当把该字段当text类型查询时,直接使用原字段名即可.</p></div> <p><img src="https://iknow.hs.net/72818af6-7cc3-4833-b7a7-dbff845ce73e.png" alt="image2"></p> <p>还需要注意的是,如果一个字段的索引类型被创建为仅为keyword类型(如下图所示)查询时,则不需要在其名称后面追加.keyword,直接查询就行.</p> <p><img src="https://iknow.hs.net/87335e55-1fe3-44ed-920b-61354383e85a.png" alt="image3"></p> <hr> <p>啰嗦完了,正式进入主题,queryStringQuery API:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token function">queryStringQuery</span><span class="token punctuation">(</span><span class="token class-name">String</span> queryString<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>其中queryString字符串就是我们的查询条件,我们可以用StringBuilder把查询字段和值拼接进去,组装成最终的查询语句.
以上图为例,我演示一个场景,请忽略场景合理性,因为是我瞎xx选的:假设我的查询条件是:字段:创建者 等于老王,且创建者分词匹配&quot;隔壁&quot;(比如:隔壁老汉,隔壁老王),或者创建者包含大猪蹄子,对应的代码如下:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testQueryString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">LambdaEsQueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Document</span><span class="token punctuation">&gt;</span></span> wrapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LambdaEsQueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">StringBuilder</span> sb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;(&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;(&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;creator.keyword&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;:&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;老王&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;)&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;AND&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;(&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;creator&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;:&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;隔壁&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;)&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;)&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;OR&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;(&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;creator.keyword&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;:&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;*大猪蹄子*&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// sb最终拼接为:((creator.keyword:老王)AND(creator:隔壁))OR(creator.keyword:*大猪蹄子*) ,可以说和MySQL语法非常相似了</span>
        wrapper<span class="token punctuation">.</span><span class="token function">queryStringQuery</span><span class="token punctuation">(</span>sb<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Document</span><span class="token punctuation">&gt;</span></span> documents <span class="token operator">=</span> documentMapper<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>documents<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p>前端参数页面每传递一行查询参数,我们往sb中append对应参数就完事了,是不是很简单,没错,但是代码不优雅,可咋整? 老汉已经给你们想好出路了,我们提供了工具类,其全路径为:QueryUtils
我们用使用该工具类重构上面的代码,如下:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testQueryStringQueryMulti</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">LambdaEsQueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Document</span><span class="token punctuation">&gt;</span></span> wrapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LambdaEsQueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> queryStr <span class="token operator">=</span> <span class="token class-name">QueryUtils</span><span class="token punctuation">.</span><span class="token function">combine</span><span class="token punctuation">(</span><span class="token class-name">Link</span><span class="token punctuation">.</span>OR<span class="token punctuation">,</span>
                <span class="token class-name">QueryUtils</span><span class="token punctuation">.</span><span class="token function">buildQueryString</span><span class="token punctuation">(</span><span class="token class-name">Document</span><span class="token operator">::</span><span class="token function">getCreator</span><span class="token punctuation">,</span> <span class="token string">&quot;老王&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Query</span><span class="token punctuation">.</span>EQ<span class="token punctuation">,</span> <span class="token class-name">Link</span><span class="token punctuation">.</span>AND<span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token class-name">QueryUtils</span><span class="token punctuation">.</span><span class="token function">buildQueryString</span><span class="token punctuation">(</span><span class="token class-name">Document</span><span class="token operator">::</span><span class="token function">getCreator</span><span class="token punctuation">,</span> <span class="token string">&quot;隔壁&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Query</span><span class="token punctuation">.</span>MATCH<span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token operator">+</span> <span class="token class-name">QueryUtils</span><span class="token punctuation">.</span><span class="token function">buildQueryString</span><span class="token punctuation">(</span><span class="token class-name">Document</span><span class="token operator">::</span><span class="token function">getCreator</span><span class="token punctuation">,</span> <span class="token string">&quot;*大猪蹄子*&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Query</span><span class="token punctuation">.</span>EQ<span class="token punctuation">)</span><span class="token punctuation">;</span>
        wrapper<span class="token punctuation">.</span><span class="token function">queryStringQuery</span><span class="token punctuation">(</span>queryStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Document</span><span class="token punctuation">&gt;</span></span> documents <span class="token operator">=</span> documentMapper<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>documents<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>是不是优雅了很多,其中的枚举Query和Link我也已经为你们封装好了,直接使用即可,不懂其枚举含义也可以直接点开查看,我在源码中有详细注释.</p></div></div>  <div class="page-edit"><div class="edit-link"><a href="https://github.com/xpc1024/easy-es-home-source/edit/master/docs/v1.0.0/020.核心功能/030.条件构造器.md" target="_blank" rel="noopener noreferrer">帮助我们改善此文档</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2022/06/29, 09:26:41</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/c5999a/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">CRUD接口</div></a> <a href="/pages/a19563/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">混合查询</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/c5999a/" class="prev">CRUD接口</a></span> <span class="next"><a href="/pages/a19563/">混合查询</a>→
      </span></p></div></div></div> <!----></main></div> <div class="footer"><div class="icons"><a href="mailto:xpc@dromara.com" title="Mail" target="_blank" class="iconfont icon-youjian"></a><a href="https://gitee.com/dromara/easy-es" title="Gitee" target="_blank" class="iconfont icon-gitee"></a><a href="https://github.com/dromara/easy-es" title="GitHub" target="_blank" class="iconfont icon-github"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2022-2022
    <span><a href="https://gitee.com/easy-es/">老汉</a>| MIT License</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.d8825657.js" defer></script><script src="/assets/js/2.b31e9563.js" defer></script><script src="/assets/js/17.c964d5e4.js" defer></script>
  </body>
</html>
